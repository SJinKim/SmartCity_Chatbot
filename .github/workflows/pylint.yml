name: Pylint

on:
    push:
        branches:
            - max
            - main

jobs:
    lint_backend:
        runs-on: ubuntu-22.04

        steps:
            - name: checkout repository
              uses: actions/checkout@v2
            - name: setup python 3.10.12
              uses: actions/setup-python@v2
              with: 
                python-version: 3.10.12
            
            - name: install dependencies
              run: |
                cd backend
                python3 -m venv venv
                source venv/bin/activate
                python3 -m pip install --upgrade pip
                pip install -r requirements.txt

            - name: lint python code
              run: |
                cd backend
                pylint $(git ls-files '*.py')